<template>
  <div>
    <main class="main-section bg-gray">
      <section
        class="
          page-heading-extranet page-heading-style-2
          text-center
          py-5
          landing-image
        "
      >
        <div class="container position-relative z-index-1 py-md-4">
          <div class="title-text mb-2 mb-sm-3 text-white">Contact Us</div>
        </div>
      </section>

      <section class="pb-5 pt-md-5 bg-grayish-blue">
        <div class="container py-5">
          <div class="row">
            <div class="col-md-6 col-xl-5 mb-4 mb-md-0 mt-md-4">
              <div
                class="section-header-inner-1 font-weight-bolder mb-3 mb-md-4"
                style="color: #323a4a"
              >
                Leave us a message
              </div>
              <div>
                Have any questions or remarks? Feel free to reach out to us for
                guidance and clarification
              </div>
              <hr class="my-4" />
              <a
                href="mailto:info@slate.ng"
                class="contact-link align-items-center mb-4"
              >
                <svg
                  class="mr-2 mr-md-3"
                  width="18"
                  height="14"
                  viewBox="0 0 18 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M0.87868 0.878802C0 1.75748 0 3.17169 0 6.00012V8.00012C0 10.8285 0 12.2428 0.87868 13.1214C1.75736 14.0001 3.17157 14.0001 6 14.0001H12C14.8284 14.0001 16.2426 14.0001 17.1213 13.1214C18 12.2428 18 10.8285 18 8.00012V6.00012C18 3.17169 18 1.75748 17.1213 0.878802C16.2426 0.00012207 14.8284 0.00012207 12 0.00012207H6C3.17157 0.00012207 1.75736 0.00012207 0.87868 0.878802ZM3.5547 3.16794C3.09517 2.86159 2.4743 2.98576 2.16795 3.44529C1.8616 3.90482 1.98577 4.52569 2.4453 4.83204L7.8906 8.46224C8.5624 8.91011 9.4376 8.91011 10.1094 8.46224L15.5547 4.83204C16.0142 4.52569 16.1384 3.90482 15.8321 3.44529C15.5257 2.98576 14.9048 2.86159 14.4453 3.16794L9 6.79814L3.5547 3.16794Z"
                    fill="#1070B7"
                  />
                </svg>
                info@slate.ng
              </a>
              <a
                href="tel:018880097"
                class="contact-link align-items-center mb-4"
              >
                <svg
                  class="mr-2 mr-md-3"
                  width="18"
                  height="18"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.67962 1.32052L3.29289 0.707244C3.68342 0.31672 4.31658 0.316719 4.70711 0.707244L7.29289 3.29303C7.68342 3.68356 7.68342 4.31672 7.29289 4.70724L5.50048 6.49966C5.2016 6.79854 5.1275 7.25514 5.31653 7.6332C6.40929 9.81872 8.18142 11.5908 10.3669 12.6836C10.745 12.8726 11.2016 12.7985 11.5005 12.4997L13.2929 10.7072C13.6834 10.3167 14.3166 10.3167 14.7071 10.7072L17.2929 13.293C17.6834 13.6836 17.6834 14.3167 17.2929 14.7072L16.6796 15.3205C14.5683 17.4319 11.2257 17.6694 8.83698 15.8779L7.62857 14.9716C5.88504 13.6639 4.33622 12.1151 3.02857 10.3716L2.12226 9.16316C0.330722 6.77443 0.568269 3.43187 2.67962 1.32052Z"
                    fill="#1070B7"
                  />
                </svg>
                018880097
              </a>
              <hr class="my-4" />
              <a
                href="https://www.facebook.com/SlateAfrica/"
                class="contact-link align-items-center mb-4"
              >
                <svg
                  class="mr-2 mr-md-3"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M0 12.067C0 18.033 4.333 22.994 10 24V15.333H7V12H10V9.333C10 6.333 11.933 4.667 14.667 4.667C15.533 4.667 16.467 4.8 17.333 4.933V8H15.8C14.333 8 14 8.733 14 9.667V12H17.2L16.667 15.333H14V24C19.667 22.994 24 18.034 24 12.067C24 5.43 18.6 0 12 0C5.4 0 0 5.43 0 12.067Z"
                    fill="#1070B7"
                  />
                </svg>
                Facebook
              </a>
              <a
                href="https://www.instagram.com/slateafrica/"
                target="_blank"
                class="contact-link align-items-center mb-4"
              >
                <svg
                  class="mr-2 mr-md-3"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M23.9227 7.08371C23.9093 6.076 23.7203 5.07831 23.3643 4.13527C23.0556 3.33982 22.584 2.61741 21.9798 2.01419C21.3756 1.41097 20.652 0.940216 19.8552 0.631999C18.9227 0.282546 17.9376 0.0935908 16.9418 0.0731789C15.6597 0.0159664 15.2532 0 11.9987 0C8.74411 0 8.32697 8.92186e-08 7.0542 0.0731789C6.05885 0.0937409 5.07421 0.282694 4.14216 0.631999C3.34526 0.940001 2.62153 1.41068 2.01728 2.01393C1.41303 2.61717 0.941567 3.33969 0.633052 4.13527C0.282316 5.06548 0.093456 6.04871 0.0746335 7.04247C0.0173256 8.32376 0 8.72957 0 11.9787C0 15.2279 -9.92969e-09 15.643 0.0746335 16.915C0.0946246 17.9102 0.282541 18.8921 0.633052 19.8248C0.942085 20.6202 1.4139 21.3424 2.01835 21.9454C2.6228 22.5484 3.3466 23.0188 4.14349 23.3268C5.07299 23.6903 6.0578 23.8927 7.05553 23.9255C8.33896 23.9827 8.74545 24 12 24C15.2546 24 15.6717 24 16.9445 23.9255C17.9402 23.9059 18.9254 23.7174 19.8578 23.368C20.6544 23.0594 21.3778 22.5885 21.982 21.9854C22.5862 21.3822 23.0579 20.66 23.3669 19.8647C23.7175 18.9334 23.9054 17.9514 23.9254 16.9549C23.9827 15.6749 24 15.2691 24 12.0186C23.9973 8.76949 23.9973 8.35703 23.9227 7.08371ZM11.9907 18.1231C8.58685 18.1231 5.82941 15.3702 5.82941 11.9721C5.82941 8.5739 8.58685 5.82104 11.9907 5.82104C13.6247 5.82104 15.1919 6.4691 16.3473 7.62264C17.5028 8.77618 18.1519 10.3407 18.1519 11.9721C18.1519 13.6034 17.5028 15.1679 16.3473 16.3215C15.1919 17.475 13.6247 18.1231 11.9907 18.1231ZM18.3972 7.02783C18.2084 7.02801 18.0215 6.99103 17.8472 6.91901C17.6728 6.84699 17.5143 6.74135 17.3809 6.60812C17.2474 6.4749 17.1416 6.31671 17.0695 6.14262C16.9973 5.96852 16.9603 5.78193 16.9605 5.59353C16.9605 5.40526 16.9976 5.21883 17.0698 5.0449C17.1419 4.87096 17.2477 4.71291 17.3811 4.57979C17.5144 4.44666 17.6727 4.34106 17.8469 4.26901C18.0212 4.19697 18.2079 4.15989 18.3965 4.15989C18.5851 4.15989 18.7718 4.19697 18.946 4.26901C19.1203 4.34106 19.2786 4.44666 19.4119 4.57979C19.5453 4.71291 19.651 4.87096 19.7232 5.0449C19.7954 5.21883 19.8325 5.40526 19.8325 5.59353C19.8325 6.38652 19.1901 7.02783 18.3972 7.02783Z"
                    fill="#1070B7"
                  />
                  <path
                    d="M11.9905 15.9676C14.2009 15.9676 15.9927 14.1787 15.9927 11.9721C15.9927 9.76536 14.2009 7.97649 11.9905 7.97649C9.78014 7.97649 7.98828 9.76536 7.98828 11.9721C7.98828 14.1787 9.78014 15.9676 11.9905 15.9676Z"
                    fill="#1070B7"
                  />
                </svg>
                Instagram
              </a>
              <a
                href="https://twitter.com/SlateAfrica"
                target="_blank"
                class="contact-link align-items-center mb-4"
              >
                <svg
                  class="mr-2 mr-md-3"
                  width="24"
                  height="20"
                  viewBox="0 0 24 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M23.643 2.937C22.808 3.307 21.911 3.557 20.968 3.67C21.941 3.08779 22.669 2.17147 23.016 1.092C22.1019 1.63499 21.1014 2.0172 20.058 2.222C19.3564 1.47287 18.4271 0.976327 17.4143 0.809475C16.4016 0.642623 15.3621 0.814792 14.4572 1.29925C13.5524 1.78371 12.8328 2.55336 12.4102 3.4887C11.9875 4.42405 11.8855 5.47275 12.12 6.472C10.2677 6.379 8.45564 5.89755 6.80144 5.05891C5.14723 4.22026 3.68785 3.04316 2.51801 1.604C2.11801 2.294 1.88801 3.094 1.88801 3.946C1.88757 4.713 2.07644 5.46824 2.43789 6.14473C2.79934 6.82122 3.32217 7.39804 3.96001 7.824C3.22029 7.80046 2.49688 7.60058 1.85001 7.241V7.301C1.84994 8.37674 2.22204 9.41938 2.90319 10.252C3.58434 11.0846 4.53258 11.6559 5.58701 11.869C4.9008 12.0547 4.18135 12.0821 3.48301 11.949C3.78051 12.8746 4.36001 13.684 5.14038 14.2639C5.92075 14.8438 6.86293 15.1652 7.83501 15.183C6.18484 16.4784 4.1469 17.1811 2.04901 17.178C1.67739 17.1781 1.30609 17.1564 0.937012 17.113C3.06649 18.4822 5.54535 19.2088 8.07701 19.206C16.647 19.206 21.332 12.108 21.332 5.952C21.332 5.752 21.327 5.55 21.318 5.35C22.2293 4.69097 23.0159 3.8749 23.641 2.94L23.643 2.937Z"
                    fill="#1070B7"
                  />
                </svg>
                Twitter
              </a>
            </div>
            <div class="col-md-6 col-xl-5 offset-xl-2">
              <UtilsCard :show="showSuccessMessage" :message="successMessage">
                <ValidationObserver v-slot="{ handleSubmit }">
                  <form @submit.prevent="handleSubmit(submitForm)">
                    <div class="mb-3">
                      <ValidationProvider
                        v-slot="{ errors }"
                        name="Full Name"
                        rules="required"
                      >
                        <label class="form-control-label">Full name</label>
                        <input
                          v-model="fullName"
                          type="text"
                          class="form-control"
                          placeholder="Enter your full name"
                        />
                        <span class="text-danger form-control-label">{{
                          errors[0]
                        }}</span>
                      </ValidationProvider>
                    </div>
                    <div class="mb-3">
                      <ValidationProvider
                        v-slot="{ errors }"
                        name="Email"
                        rules="required|email"
                      >
                        <label class="form-control-label">Email</label>
                        <input
                          v-model="email"
                          class="form-control"
                          type="email"
                          placeholder="Enter your email address"
                        />
                        <span class="text-danger form-control-label">{{
                          errors[0]
                        }}</span>
                      </ValidationProvider>
                    </div>
                    <div class="mb-3">
                      <ValidationProvider
                        v-slot="{ errors }"
                        name="Phone"
                        rules="required"
                      >
                        <label class="form-control-label">Phone number</label>
                        <input
                          v-model="phone"
                          type="text"
                          class="form-control"
                          placeholder="Enter your phone number"
                        />
                        <span class="text-danger form-control-label">{{
                          errors[0]
                        }}</span>
                      </ValidationProvider>
                    </div>
                    <div class="mb-3">
                      <ValidationProvider
                        v-slot="{ errors }"
                        name="Phone"
                        rules="required"
                      >
                        <label class="form-control-label">Your Message</label>
                        <textarea
                          v-model="message"
                          class="form-control"
                        ></textarea>
                        <span class="text-danger form-control-label">{{
                          errors[0]
                        }}</span>
                      </ValidationProvider>
                    </div>
                    <div class="mb-3">
                      <ValidationProvider
                        v-slot="{ errors }"
                        name="Phone"
                        rules="required"
                      >
                        <label class="form-control-label">Enter captcha</label>

                        <img
                          class="mb-2"
                          :src="'data:image/png;base64,' + img64"
                        />

                        <BaseButton class="px-1 py-0" @click="refreshCaptcha">
                          <span
                            class="iconify"
                            data-icon="system-uicons:refresh-alt"
                          ></span
                        ></BaseButton>
                        <input
                          v-model="captchaInput"
                          type="text"
                          class="form-control"
                          placeholder="Enter Captcha Input"
                        />
                        <span class="text-danger form-control-label">{{
                          errors[0]
                        }}</span>
                      </ValidationProvider>
                    </div>
                    <div class="mb-3">
                      <BaseButton
                        type="submit"
                        class="btn btn-primary w-100 py-3"
                      >
                        Submit
                      </BaseButton>
                    </div>
                  </form>
                </ValidationObserver>
              </UtilsCard>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
</template>

<script lang="ts">
import Vue from 'vue'

export default Vue.extend({
  layout: 'notLoggedin',
  async asyncData({ $axios }) {
    const { data } = await $axios.$get('./util/v2/contactus/init/')
    return {
      hash: data.hash,
      img64: data.img,
    }
  },
  data() {
    const fullName: string = ''
    const email: string = ''
    const phone: string = ''
    const message: string = ''
    const captchaInput: string = ''
    const showSuccessMessage: boolean = false
    const successMessage: string = ''
    return {
      fullName,
      email,
      phone,
      message,
      captchaInput,
      hash: '',
      showSuccessMessage,
      successMessage,
      img64: '',
    }
  },
  methods: {
    async refreshCaptcha() {
      const { data } = await this.$axios.$get('./util/v2/contactus/init/')
      this.img64 = data.img
      this.hash = data.hash
    },
    async submitForm(): Promise<void> {
      try {
        const data = await this.$axios.$post('/util/v2/contactus/', {
          is_humman_text: this.captchaInput,
          is_humman_hash: this.hash,
          email: this.email,
          phone: this.phone,
          full_name: this.fullName,
          message: this.message,
        })

        if (data.message) {
          this.showSuccessMessage = true
          this.successMessage = data.message
          // this.$toast.success(data.message)
        }
      } catch (e) {
        // console.log(e.response)
        // this.$toast.error(e)
      }
    },
  },
})
</script>

<style scoped>
.landing-image {
  background-image: url('~/assets/img/contact-page-header.png');
}
</style>
